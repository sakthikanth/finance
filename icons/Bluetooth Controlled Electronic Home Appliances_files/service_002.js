!function(e,t){sumo.define("plugins/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,r){r()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,r=!1,i=!0;t[1]||t[7]?r=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?i=!1:t[4]&&(r=parseInt(t[4])<18);var n={};n.pluginBuilder="./css-builder";var a,o=function(){a=document.createElement("style"),e.appendChild(a)},s=function(e,t){o();var r=a.styleSheet||a.sheet;if(r&&r.addImport)r.addImport(e),a.onload=t;else{a.textContent='@import "'+e+'";';var i=setInterval(function(){try{a.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},l=function(t,r){var n=document.createElement("link");if(n.type="text/css",n.rel="stylesheet",i)n.onload=function(){n.onload=function(){},setTimeout(r,7)};else var a=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==n.href)return clearInterval(a),r()}},10);n.href=t,e.appendChild(n)};return n.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},n.load=function(e,t,i,n){(r?s:l)(t.toUrl(e+".css"),i)},n}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i="undefined"!=typeof location&&location.href,n=i&&location.protocol&&location.protocol.replace(/\:/,""),a=i&&location.hostname,o=i&&(location.port||void 0),s=[];sumo.define("plugins/text",[],function(){var l,u,c;return"undefined"!=typeof window&&window.navigator&&window.document?u=function(e,t){var r=l.createXhr();r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&t(r.responseText)},r.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(c=require.nodeRequire("fs"),u=function(e,t){t(c.readFileSync(e,"utf8"))}):"undefined"!=typeof Packages&&(u=function(e,t){var r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),"utf-8")),n,a,o="";try{for(n=new java.lang.StringBuffer,(a=r.readLine())&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),n.append(a);null!==(a=r.readLine());)n.append(i),n.append(a);o=String(n.toString())}finally{r.close()}t(o)}),l={version:"1.0.2",strip:function(e){if(e){var e=e.replace(t,""),i=e.match(r);i&&(e=i[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,r,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(r=0;3>r;r++){i=e[r];try{t=new ActiveXObject(i)}catch(n){}if(t){e=[i];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:u,parseName:function(e){var t=!1,r=e.indexOf("."),i=e.substring(0,r),e=e.substring(r+1,e.length),r=e.indexOf("!");return-1!==r&&(t=e.substring(r+1,e.length),t="strip"===t,e=e.substring(0,r)),{moduleName:i,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,i){var n=l.xdRegExp.exec(e),a;return n?(e=n[2],n=n[3],n=n.split(":"),a=n[1],n=n[0],!(e&&e!==t||n&&n!==r||(a||n)&&a!==i)):!0},finishLoad:function(e,t,r,i,n){r=t?l.strip(r):r,n.isBuild&&(s[e]=r),i(r)},load:function(e,t,r,s){if(s.isBuild&&!s.inlineText)r();else{var u=l.parseName(e),c=u.moduleName+"."+u.ext,h=t.toUrl(c),d=s&&s.text&&s.text.useXhr||l.useXhr;!i||d(h,n,a,o)?l.get(h,function(t){l.finishLoad(e,u.strip,t,r,s)}):t([c],function(e){l.finishLoad(u.moduleName+"."+u.ext,u.strip,e,r,s)})}},write:function(e,t,r){if(t in s){var i=l.jsEscape(s[t]);r.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,r,i,n){var t=l.parseName(t),a=t.moduleName+"."+t.ext,o=r.toUrl(t.moduleName+"."+t.ext)+".js";l.load(a,r,function(){var t=function(e){return i(o,e)};t.asModule=function(e,t){return i.asModule(e,o,t)},l.write(e,a,t,n)},n)}}})}(),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(r,i){"object"==typeof e?t.exports=i(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof sumo.define&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],i):r.URI=i(r.punycode,r.IPv6,r.SecondLevelDomains,r)}(this,function(e,t,r,i){"use strict";function n(e,t){return this instanceof n?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new n(e,t)}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function o(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function s(e){return"Array"===o(e)}function l(e,t){var r={},i,n;if(s(t))for(i=0,n=t.length;n>i;i++)r[t[i]]=!0;else r[t]=!0;for(i=0,n=e.length;n>i;i++)void 0!==r[e[i]]&&(e.splice(i,1),n--,i--);return e}function u(e,t){var r,i;if(s(t)){for(r=0,i=t.length;i>r;r++)if(!u(e,t[r]))return!1;return!0}var n=o(t);for(r=0,i=e.length;i>r;r++)if("RegExp"===n){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function c(e,t){if(!s(e)||!s(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,i=e.length;i>r;r++)if(e[r]!==t[r])return!1;return!0}function h(e){return escape(e)}function d(e){return encodeURIComponent(e).replace(/[!'()*]/g,h).replace(/\*/g,"%2A")}var p=i&&i.URI;n.version="1.12.0";var m=n.prototype,f=Object.prototype.hasOwnProperty;n._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:n.duplicateQueryParameters,escapeQuerySpace:n.escapeQuerySpace}},n.duplicateQueryParameters=!1,n.escapeQuerySpace=!0,n.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,n.idn_expression=/[^a-z0-9\.-]/i,n.punycode_expression=/(xn--)/i,n.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},n.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},n.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,n.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},n.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return n.domAttributes[t]}},n.encode=d,n.decode=decodeURIComponent,n.iso8859=function(){n.encode=escape,n.decode=unescape},n.unicode=function(){n.encode=d,n.decode=decodeURIComponent},n.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},n.encodeQuery=function(e,t){var r=n.encode(e+"");return t?r.replace(/%20/g,"+"):r},n.decodeQuery=function(e,t){e+="";try{return n.decode(t?e.replace(/\+/g,"%20"):e)}catch(r){return e}},n.recodePath=function(e){for(var t=(e+"").split("/"),r=0,i=t.length;i>r;r++)t[r]=n.encodePathSegment(n.decode(t[r]));return t.join("/")},n.decodePath=function(e){for(var t=(e+"").split("/"),r=0,i=t.length;i>r;r++)t[r]=n.decodePathSegment(t[r]);return t.join("/")};var g={encode:"encode",decode:"decode"},v,_=function(e,t){return function(r){return n[t](r+"").replace(n.characters[e][t].expression,function(r){return n.characters[e][t].map[r]})}};for(v in g)n[v+"PathSegment"]=_("pathname",g[v]);n.encodeReserved=_("reserved","encode"),n.parse=function(e,t){var r;return t||(t={}),r=e.indexOf("#"),r>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),r=e.indexOf("?"),r>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=n.parseAuthority(e,t)):(r=e.indexOf(":"),r>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(n.protocol_expression)?t.protocol=void 0:"file"===t.protocol?e=e.substring(r+3):"//"===e.substring(r+1,r+3)?(e=e.substring(r+3),e=n.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0))),t.path=e,t},n.parseHost=function(e,t){var r=e.indexOf("/"),i,n;return-1===r&&(r=e.length),"["===e.charAt(0)?(i=e.indexOf("]"),t.hostname=e.substring(1,i)||null,t.port=e.substring(i+2,r)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,r)||null,t.port=null):(n=e.substring(0,r).split(":"),t.hostname=n[0]||null,t.port=n[1]||null),t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),e.substring(r)||"/"},n.parseAuthority=function(e,t){return e=n.parseUserinfo(e,t),n.parseHost(e,t)},n.parseUserinfo=function(e,t){var r=e.indexOf("/"),i=r>-1?e.lastIndexOf("@",r):e.indexOf("@"),a;return i>-1&&(-1===r||r>i)?(a=e.substring(0,i).split(":"),t.username=a[0]?n.decode(a[0]):null,a.shift(),t.password=a[0]?n.decode(a.join(":")):null,e=e.substring(i+1)):(t.username=null,t.password=null),e},n.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var r={},i=e.split("&"),a=i.length,o,s,l,u=0;a>u;u++)o=i[u].split("="),s=n.decodeQuery(o.shift(),t),l=o.length?n.decodeQuery(o.join("="),t):null,r[s]?("string"==typeof r[s]&&(r[s]=[r[s]]),r[s].push(l)):r[s]=l;return r},n.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=n.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},n.buildHost=function(e){var t="";return e.hostname?(n.ip6_expression.test(e.hostname)?t+=e.port?"["+e.hostname+"]:"+e.port:e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},n.buildAuthority=function(e){return n.buildUserinfo(e)+n.buildHost(e)},n.buildUserinfo=function(e){var t="";return e.username&&(t+=n.encode(e.username),e.password&&(t+=":"+n.encode(e.password)),t+="@"),t},n.buildQuery=function(e,t,r){var i="",a,o,l,u;for(o in e)if(f.call(e,o)&&o)if(s(e[o]))for(a={},l=0,u=e[o].length;u>l;l++)void 0!==e[o][l]&&void 0===a[e[o][l]+""]&&(i+="&"+n.buildQueryParameter(o,e[o][l],r),t!==!0&&(a[e[o][l]+""]=!0));else void 0!==e[o]&&(i+="&"+n.buildQueryParameter(o,e[o],r));return i.substring(1)},n.buildQueryParameter=function(e,t,r){return n.encodeQuery(e,r)+(null!==t?"="+n.encodeQuery(t,r):"")},n.addQuery=function(e,t,r){if("object"==typeof t)for(var i in t)f.call(t,i)&&n.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),s(r)||(r=[r]),e[t]=e[t].concat(r)}},n.removeQuery=function(e,t,r){var i,a,o;if(s(t))for(i=0,a=t.length;a>i;i++)e[t[i]]=void 0;else if("object"==typeof t)for(o in t)f.call(t,o)&&n.removeQuery(e,o,t[o]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==r?e[t]===r?e[t]=void 0:s(e[t])&&(e[t]=l(e[t],r)):e[t]=void 0}},n.hasQuery=function(e,t,r,i){if("object"==typeof t){for(var a in t)if(f.call(t,a)&&!n.hasQuery(e,a,t[a]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(o(r)){case"Undefined":return t in e;case"Boolean":var l=Boolean(s(e[t])?e[t].length:e[t]);return r===l;case"Function":return!!r(e[t],t,e);case"Array":if(!s(e[t]))return!1;var h=i?u:c;return h(e[t],r);case"RegExp":return s(e[t])?i?u(e[t],r):!1:Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return s(e[t])?i?u(e[t],r):!1:e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.commonPath=function(e,t){var r=Math.min(e.length,t.length),i;for(i=0;r>i;i++)if(e.charAt(i)!==t.charAt(i)){i--;break}return 1>i?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(i)||"/"!==t.charAt(i))&&(i=e.substring(0,i).lastIndexOf("/")),e.substring(0,i+1))},n.withinString=function(e,t,r){r||(r={});var i=r.start||n.findUri.start,a=r.end||n.findUri.end,o=r.trim||n.findUri.trim,s=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var l=i.exec(e);if(!l)break;var u=l.index;if(r.ignoreHtml){var c=e.slice(Math.max(u-3,0),u);if(c&&s.test(c))continue}var h=u+e.slice(u).search(a),d=e.slice(u,h).replace(o,"");if(!r.ignore||!r.ignore.test(d)){h=u+d.length;var p=t(d,u,h,e);e=e.slice(0,u)+p+e.slice(h),i.lastIndex=u+p.length}}return i.lastIndex=0,e},n.ensureValidHostname=function(t){if(t.match(n.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(n.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},n.noConflict=function(e){if(e){var r={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(r.URITemplate=URITemplate.noConflict()),t&&"function"==typeof t.noConflict&&(r.IPv6=t.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(r.SecondLevelDomains=SecondLevelDomains.noConflict()),r}return i.URI===this&&(i.URI=p),this},m.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=n.build(this._parts),this._deferred_build=!1),this},m.clone=function(){return new n(this)},m.valueOf=m.toString=function(){return this.build(!1)._string},g={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},_=function(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}};for(v in g)m[v]=_(g[v]);g={query:"?",fragment:"#"},_=function(e,t){return function(r,i){return void 0===r?this._parts[e]||"":(null!==r&&(r+="",r.charAt(0)===t&&(r=r.substring(1))),this._parts[e]=r,this.build(!i),this)}};for(v in g)m[v]=_(v,g[v]);g={search:["?","query"],hash:["#","fragment"]},_=function(e,t){return function(r,i){var n=this[e](r,i);return"string"==typeof n&&n.length?t+n:n}};for(v in g)m[v]=_(g[v][1],g[v][0]);m.pathname=function(e,t){if(void 0===e||e===!0){var r=this._parts.path||(this._parts.hostname?"/":"");return e?n.decodePath(r):r}return this._parts.path=e?n.recodePath(e):"/",this.build(!t),this},m.path=m.pathname,m.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=n._parts();var i=e instanceof n,a="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=n.getDomAttribute(e);e=e[o]||"",a=!1}if(!i&&a&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e)this._parts=n.parse(e,this._parts);else{if(!i&&!a)throw new TypeError("invalid input");var s=i?e._parts:e;for(r in s)f.call(this._parts,r)&&(this._parts[r]=s[r])}return this.build(!t),this},m.is=function(e){var t=!1,i=!1,a=!1,o=!1,s=!1,l=!1,u=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,i=n.ip4_expression.test(this._parts.hostname),a=n.ip6_expression.test(this._parts.hostname),t=i||a,o=!t,s=o&&r&&r.has(this._parts.hostname),l=o&&n.idn_expression.test(this._parts.hostname),u=o&&n.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return o;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return a;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var b=m.protocol,y=m.port,w=m.hostname;m.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(n.protocol_expression)))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return b.call(this,e,t)},m.scheme=m.protocol,m.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port '"+e+"' contains characters other than [0-9]");return y.call(this,e,t)},m.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={};n.parseHost(e,r),e=r.hostname}return w.call(this,e,t)},m.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?n.buildHost(this._parts):"":(n.parseHost(e,this._parts),this.build(!t),this)},m.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?n.buildAuthority(this._parts):"":(n.parseAuthority(e,this._parts),this.build(!t),this)},m.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var r=n.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==e[e.length-1]&&(e+="@"),n.parseUserinfo(e,this._parts),this.build(!t),this},m.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=n.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},m.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var i=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,i),s=new RegExp("^"+a(o));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&n.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(s,e),this.build(!t),this},m.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(n.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var o=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},m.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),n=this._parts.hostname.substring(i+1);return t!==!0&&r&&r.list[n.toLowerCase()]?r.get(this._parts.hostname)||n:n}var o;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");o=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},m.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?n.decodePath(i):i}var o=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,o),l=new RegExp("^"+a(s));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=n.recodePath(e),this._parts.path=this._parts.path.replace(l,e),this.build(!t),this},m.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(r+1);return e?n.decodePathSegment(i):i}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var s=new RegExp(a(this.filename())+"$");return e=n.recodePath(e),this._parts.path=this._parts.path.replace(s,e),o?this.normalizePath(t):this.build(!t),this},m.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this.filename(),i=r.lastIndexOf("."),o,s;return-1===i?"":(o=r.substring(i+1),s=/^[a-z0-9%]+$/i.test(o)?o:"",e?n.decodePathSegment(s):s)}"."===e.charAt(0)&&(e=e.substring(1));var l=this.suffix(),u;if(l)u=e?new RegExp(a(l)+"$"):new RegExp(a("."+l)+"$");else{if(!e)return this;this._parts.path+="."+n.recodePath(e)}return u&&(e=n.recodePath(e),this._parts.path=this._parts.path.replace(u,e)),this.build(!t),this},m.segment=function(e,t,r){var i=this._parts.urn?":":"/",n=this.path(),a="/"===n.substring(0,1),o=n.split(i);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error("Bad segment '"+e+"', must be 0-based integer");if(a&&o.shift(),0>e&&(e=Math.max(o.length+e,0)),void 0===t)return void 0===e?o:o[e];if(null===e||void 0===o[e])if(s(t)){o=[];for(var l=0,u=t.length;u>l;l++)(t[l].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(t[l]))}else(t||"string"==typeof t)&&(""===o[o.length-1]?o[o.length-1]=t:o.push(t));else t||"string"==typeof t&&t.length?o[e]=t:o.splice(e,1);return a&&o.unshift(""),this.path(o.join(i),r)},m.segmentCoded=function(e,t,r){var i,a,o;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(i=this.segment(e,t,r),s(i))for(a=0,o=i.length;o>a;a++)i[a]=n.decode(i[a]);else i=void 0!==i?n.decode(i):void 0;return i}if(s(t))for(a=0,o=t.length;o>a;a++)t[a]=n.decode(t[a]);else t="string"==typeof t?n.encode(t):t;return this.segment(e,t,r)};var x=m.query;return m.query=function(e,t){if(e===!0)return n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,r);return this._parts.query=n.buildQuery(i||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=n.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):x.call(this,e,t)},m.setQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof e)for(var a in e)f.call(e,a)&&(i[a]=e[a]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");i[e]=void 0!==t?t:null}return this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},m.addQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.addQuery(i,e,void 0===t?null:t),this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},m.removeQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.removeQuery(i,e,t),this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},m.hasQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.hasQuery(i,e,t,r)},m.setSearch=m.setQuery,m.addSearch=m.addQuery,m.removeSearch=m.removeQuery,m.hasSearch=m.hasQuery,m.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},m.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},m.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},m.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===n.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},m.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,r=this._parts.path,i="",a,o;for("/"!==r.charAt(0)&&(t=!0,r="/"+r),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(i=r.substring(1).match(/^(\.\.\/)+/)||"",i&&(i=i[0]));;){if(a=r.indexOf("/.."),-1===a)break;0!==a?(o=r.substring(0,a).lastIndexOf("/"),-1===o&&(o=a),r=r.substring(0,o)+r.substring(a+3)):r=r.substring(3)}return t&&this.is("relative")&&(r=i+r.substring(1)),r=n.recodePath(r),this._parts.path=r,this.build(!e),this},m.normalizePathname=m.normalizePath,m.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(n.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},m.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},m.normalizeSearch=m.normalizeQuery,m.normalizeHash=m.normalizeFragment,m.iso8859=function(){var e=n.encode,t=n.decode;return n.encode=escape,n.decode=decodeURIComponent,this.normalize(),n.encode=e,n.decode=t,this},m.unicode=function(){var e=n.encode,t=n.decode;return n.encode=d,n.decode=unescape,this.normalize(),n.encode=e,n.decode=t,this},m.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var i="",a=0,o=t._parts.query.split("&"),s=o.length;s>a;a++){var l=(o[a]||"").split("=");i+="&"+n.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(i+="="+n.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+i.substring(1)}return r+=n.decodeQuery(t.hash(),!0)},m.absoluteTo=function(e){var t=this.clone(),r=["protocol","username","password","hostname","port"],i,a,o;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof n||(e=new n(e)),t._parts.protocol||(t._parts.protocol=e._parts.protocol),this._parts.hostname)return t;for(a=0;o=r[a];a++)t._parts[o]=e._parts[o];return t._parts.path?".."===t._parts.path.substring(-2)&&(t._parts.path+="/"):(t._parts.path=e._parts.path,t._parts.query||(t._parts.query=e._parts.query)),"/"!==t.path().charAt(0)&&(i=e.directory(),t._parts.path=(i?i+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},m.relativeTo=function(e){var t=this.clone().normalize(),r,i,a,o,s;if(t._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new n(e).normalize(),r=t._parts,i=e._parts,o=t.path(),s=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(r.protocol===i.protocol&&(r.protocol=null),r.username!==i.username||r.password!==i.password)return t.build();if(null!==r.protocol||null!==r.username||null!==r.password)return t.build();if(r.hostname!==i.hostname||r.port!==i.port)return t.build();if(r.hostname=null,r.port=null,o===s)return r.path="",t.build();if(a=n.commonPath(t.path(),e.path()),!a)return t.build();var l=i.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return r.path=l+r.path.substring(a.length),t.build()},m.equals=function(e){var t=this.clone(),r=new n(e),i={},a={},o={},l,u,h;if(t.normalize(),r.normalize(),t.toString()===r.toString())return!0;if(l=t.query(),u=r.query(),t.query(""),r.query(""),t.toString()!==r.toString())return!1;if(l.length!==u.length)return!1;i=n.parseQuery(l,this._parts.escapeQuerySpace),a=n.parseQuery(u,this._parts.escapeQuerySpace);for(h in i)if(f.call(i,h)){if(s(i[h])){if(!c(i[h],a[h]))return!1}else if(i[h]!==a[h])return!1;o[h]=!0}for(h in a)if(f.call(a,h)&&!o[h])return!1;return!0},m.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},m.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},n}),sumo.define("color",[],function(){var e={lightOrDark:function(e){var t,r,i,n;return e.toHex&&(e="#"+e.toHex()),e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),t=e[1],i=e[2],r=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),t=e>>16,i=e>>8&255,r=255&e),n=Math.sqrt(.299*(t*t)+.587*(i*i)+.114*(r*r)),n>127.5?"light":"dark"},whiteOrBlack:function(e){return"light"==this.lightOrDark(e)?"black":"white"},shadeColor:function(e,t){e=e.toString();var r=parseInt(e.slice(1),16),i=Math.round(2.55*t),n=(r>>16)+i,a=(r>>8&255)+i,o=(255&r)+i;return"#"+(16777216+65536*(255>n?1>n?0:n:255)+256*(255>a?1>a?0:a:255)+(255>o?1>o?0:o:255)).toString(16).slice(1)},RGBColor:function(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}}],r=0;r<t.length;r++){
var i=t[r].re,n=t[r].process,a=i.exec(e);a&&(channels=n(a),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r}},hexToRGBA:function(e,t){var r=new this.RGBColor(e);return r.a=t||1,r.toRGBA()}};return e}),sumo.define("articles",[],function(){var e=[],t=["[class^=comment]","[id^=comment]","[class*=footer]","[class^=comment]",".archive-page",".aside",".hentry-metro",".hrf-entry"],r=[".sidebar:not(body)","aside","#sidebar","footer","[class*=footer]:not(body):not([class*=not-footer])","#comments","#livefyre-comments","[class^=fyre]","[id^=comment]","[class*=related-post]:not(body)",".tve-leads-lightbox"],i=[],n={_invalidateNode:function(e){if(e&&"#text"!==e.nodeName&&(i.push(e),e.childNodes&&e.childNodes.length>0))for(var t=0;t<e.childNodes.length;t++)this._invalidateNode(e.childNodes[t])},_findInvalidElements:function(e){for(var t=0;t<r.length;t++)for(var i=r[t],n=e.querySelectorAll(i),a=0;a<n.length;a++)this._invalidateNode(n[a])},_findAnchor:function(e){for(var t=null,r=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],i=0;i<r.length;i++){var n=r[i],a=e.querySelector(n+"[href]");if(a)return a[0]}return null},_findFooter:function(e){for(var t=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not([class^=comment-count]):not([class^=comments-link]):not([class^=comments-number]):not(li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],r=[".post-meta-info"],i=0;i<t.length;i++){var n=t[i],a=e.querySelector(n);if(a){if(a.classList.contains("fb-comments")){for(var o=a,s=a,l=!1;null!==s.previousElementSibling;){if("P"===s.nodeName&&"H3"===s.previousElementSibling.nodeName){l=!0,s=s.previousElementSibling;break}s=s.previousElementSibling}if(l){for(;null!==s.previousElementSibling;)if(s=s.previousElementSibling,"H3"===s.nodeName)return s;return o}return o}return a}}return null},_findHeader:function(e){for(var t=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],r=0;r<t.length;r++){var i=t[r],n=e.querySelector(i);if(n)return n}return null},_validateArticles:function(e){if(!e||!e.length)return[];for(var t=[],r=0;r<e.length;r++){var n=e[r],a=!0;if(""!==n.innerText.trim()){for(var o=0;o<i.length;o++)n===i[o]&&(a=!1);if(a){n.__header||(n.__header=this._findHeader(n)),n.__title=n.__header?n.__header:null,n.__footer=this._findFooter(n),self._title&&(n.__titleText=self.__title.innerText());var s=n.__header&&n.__header.length?this._findAnchor(n.__header[0]):null;s?n.__anchor=s:n.__anchor=this._findAnchor(n),n.__anchor?n.__url=n.__anchor.getAttribute("href"):n.__url=null,n.__url||(n.__url=window.location.href),t.push(n)}}}return t},_findLeaves:function(e,r){for(var i=r,n=0;n<t.length;n++)i+=":not("+t[n]+")";var a=e.querySelectorAll(i);return a||[]},findAll:function(){var t=document.querySelector('main, [role="main"]'),r=t?t:document.body;e.push("article"),e.push(".post"),e.push(".entry-content"),e.push(".post-content"),e.push(".post_box"),e.push(".post-item"),e.push(".blog-post-wrapper"),e.push(".type-post"),e.push("#content"),e.push(".blog_content"),r===document.body?(e.push("main .hentry"),e.push("[role=main] .hentry"),e.push("main .content"),e.push("[role=main] .content")):(e.push(".hentry"),e.push(".content")),e.push("#post-content"),e.push("#blog-content"),e.push(".blog-post"),this._findInvalidElements(r);for(var i=0;i<e.length;i++){var n=this._findLeaves(r,e[i]),a=this._validateArticles(n);if(a.length>0)return a}var o=document.querySelectorAll("p"),n=[];if(o&&o.length){for(var i=0;i<o.length;i++){var s=o[i],l=s.nextSibling;l&&"P"===l.nodeName&&(l=l.nextSibling,l&&"P"===l.nodeName&&-1===n.indexOf(s.parentNode)&&n.push(s.parentNode))}var a=this._validateArticles(n);if(a.length>0)return a}return[]},find:function(){var e=this.findAll();return e&&e.length?e[0]:null},hasArticles:function(){return this.findAll().length>=1}};return n}),sumo.define("plugins/text!55c989d5-855d-4538-b67b-3cdb46acd968/templates/sharer_popup.html",[],function(){return'<div class="sumome-image-sharer-popup-form">\n  <div class="sumome-form">\n    <div class="sumome-row" id="sumome-image-sharer">\n      <div class="sumome-image-sharer-preloader">\n        <img src="{{preloader}}" />\n      </div>\n    </div>\n  </div>\n</div>\n'}),function(){var r;r=function(e){var t,r;return t=!1,e(function(){var i;return i=(document.body||document.documentElement).style,t=void 0!==i.animation||void 0!==i.WebkitAnimation||void 0!==i.MozAnimation||void 0!==i.MsAnimation||void 0!==i.OAnimation,e(window).bind("resize.vex",function(e){return e&&"resize"==e.type&&e.target!=window?void 0:r.resize()}),e(window).bind("keyup.vex",function(e){return 27===e.keyCode?r.closeByEscape():void 0})}),r={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"sumome-vex",content:"sumome-vex-content",overlay:"sumome-vex-overlay",close:"sumome-vex-close",closing:"sumome-vex-closing",open:"sumome-vex-open"},defaultOptions:{content:"",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",openClassName:"",closeCSS:{},allowBackgroundScrolling:!1},open:function(t){return t=e.extend({},r.defaultOptions,t),t.id=r.globalID,r.globalID+=1,t.$vex=e("<div>").addClass(r.baseClassNames.vex).addClass(t.className).css(t.css).data({vex:t}),t.openClassName&&t.$vex.addClass(t.openClassName),t.allowBackgroundScrolling||r.setupHTMLClassName(t.$vex),t.$vexOverlay=e("<div>").addClass(r.baseClassNames.overlay).addClass(t.overlayClassName).css(t.overlayCSS).data({vex:t}),t.overlayClosesOnClick&&t.$vexOverlay.bind("click.vex",function(t){return t.target===this?r.close(e(this).data().vex.id):void 0}),t.$vex.append(t.$vexOverlay),t.$vexContent=e("<div>").addClass(r.baseClassNames.content).addClass(t.contentClassName).css(t.contentCSS).append(t.content).data({vex:t}),t.$vexContent.find("link").bind("load.vex",function(e){return r.resize()}),t.$vexContent.bind("resize.vex",function(e){return r.resize()}),t.$vex.append(t.$vexContent),t.customCloseButton?t.showCloseButton&&(t.$closeButton=t.$vexContent.find("."+t.closeClassName).eq(0).data({vex:t}).bind("click.vex",function(){return r.close(e(this).data().vex.id)})):t.showCloseButton&&(t.$closeButton=e("<div>").addClass(r.baseClassNames.close).addClass(t.closeClassName).css(t.closeCSS).data({vex:t}).bind("click.vex",function(){return r.close(e(this).data().vex.id)}),t.$vexContent.append(t.$closeButton)),e(t.appendLocation).append(t.$vex),t.afterOpen&&t.afterOpen(t.$vexContent,t),setTimeout(function(){return t.$vexContent.trigger("vexOpen",t)},0),t.$vexContent},getAllVexes:function(){return e("."+r.baseClassNames.vex+':not(".'+r.baseClassNames.closing+'") .'+r.baseClassNames.content)},getVexByID:function(t){return r.getAllVexes().filter(function(){return e(this).data().vex.id===t})},close:function(e){var t;if(!e){if(t=r.getAllVexes().last(),!t.length)return!1;e=t.data().vex.id}return r.closeByID(e)},closeAll:function(){var t;return t=r.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=t?t.length:void 0)?(e.each(t.reverse(),function(e,t){return r.closeByID(t)}),!0):!1},closeByID:function(i){var n,a,o,s,l;return a=r.getVexByID(i),a.length?(n=a.data().vex.$vex,l=e.extend({},a.data().vex),o=function(){return l.beforeClose?l.beforeClose(a,l):void 0},s=function(){return a.trigger("vexClose",l),n.remove(),l.afterClose?l.afterClose(a,l):void 0},t?(o(),n.unbind(r.animationEndEvent).bind(r.animationEndEvent,function(){return s()}).addClass(r.baseClassNames.closing)):(o(),s()),!0):void 0},resizeByID:function(t){var i,n,a,o,s;return n=r.getVexByID(t),n.length?(i=n.data().vex.$vex,s=e.extend({},n.data().vex),n.trigger("vexResize",s),!0):void 0},resize:function(){var t,i,n;return n=r.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=n?n.length:void 0)?(i=Math.max.apply(Math,n),t=r.getVexByID(i),r.resizeByID(i)):!1},closeByEscape:function(){var t,i,n;return n=r.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=n?n.length:void 0)?(i=Math.max.apply(Math,n),t=r.getVexByID(i),t.data().vex.escapeButtonCloses!==!0?!1:r.closeByID(i)):!1},setupHTMLClassName:function(t){return t.bind("vexOpen.vex",function(){return e("html").addClass(r.baseClassNames.open)}).bind("vexClose.vex",function(){return r.getAllVexes().length?void 0:e("html").removeClass(r.baseClassNames.open)})},hideLoading:function(){return e(".vex-loading-spinner").remove()},showLoading:function(){return r.hideLoading(),e("body").append('<div class="vex-loading-spinner '+r.defaultOptions.className+'"></div>')}}},"function"==typeof sumo.define&&sumo.define.amd?sumo.define("vex",["jquery"],r):"object"==typeof e?t.exports=r(require("jquery")):window.vex=r(jQuery)}.call(this),sumo.define("twitter-text",[],function(){function e(e,t){return e.replace(/#\{(\w+)\}/g,function(e,r){return t[r]||""})}function t(e,t){return t=t||"","string"!=typeof e&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var i=r.txt.regexen[t]||"";return"string"!=typeof i&&(i=i.source),i}),t)}var r={txt:{regexen:{}}};return r.txt.regexen.validUrlPrecedingChars=t(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),r.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,r.txt.regexen.invalidDomainChars=e("#{punct}#{spaces_group}#{invalid_chars_group}",r.txt.regexen),r.txt.regexen.validDomainChars=t(/[^#{invalidDomainChars}]/),r.txt.regexen.validSubdomain=t(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),r.txt.regexen.validDomainName=t(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),r.txt.regexen.validGTLD=t(RegExp("(?:(?:academy|accountants|active|actor|aero|agency|airforce|archi|army|arpa|asia|associates|attorney|audio|autos|axa|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|blue|bmw|boutique|brussels|build|builders|buzz|bzh|cab|camera|camp|cancerresearch|capetown|capital|cards|care|career|careers|cash|cat|catering|center|ceo|cheap|christmas|church|citic|claims|cleaning|clinic|clothing|club|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cruises|cuisinella|dance|dating|degree|democrat|dental|dentist|desi|diamonds|digital|direct|directory|discount|dnp|domains|durban|edu|education|email|engineer|engineering|enterprises|equipment|estate|eus|events|exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|florist|foo|foundation|frogans|fund|furniture|futbol|gal|gallery|gift|gives|glass|global|globo|gmo|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|hiphop|hiv|holdings|holiday|homes|horse|host|house|immobilien|industries|info|ink|institute|insure|int|international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|kred|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|luxe|luxury|maison|management|mango|market|marketing|media|meet|menu|miami|mil|mini|mobi|moda|moe|monash|mortgage|moscow|motorcycles|museum|nagoya|name|navy|net|neustar|nhk|ninja|nyc|okinawa|onl|org|organic|ovh|paris|partners|parts|photo|photography|photos|physio|pics|pictures|pink|place|plumbing|post|press|pro|productions|properties|pub|qpon|quebec|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|reviews|rich|rio|rocks|rodeo|ruhr|ryukyu|saarland|schmidt|schule|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|systems|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|town|toys|trade|training|travel|university|uno|vacations|vegas|ventures|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wang|watch|webcam|website|wed|wien|wiki|works|wtc|wtf|xxx|xyz|yachts|yokohama|zone|дети|москва|онлайн|орг|сайт|بازار|شبكة|موقع|संगठन|みんな|世界|中信|中文网|公司|公益|商城|商标|在线|我爱你|政务|机构|游戏|移动|组织机构|网址|网络|集团|삼성)(?=[^0-9a-zA-Z@]|$))")),r.txt.regexen.validCCTLD=t(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|мкд|мон|рф|срб|укр|қаз|الاردن|الجزائر|السعودية|المغرب|امارات|ایران|بھارت|تونس|سودان|سورية|عمان|فلسطين|قطر|مصر|مليسيا|پاکستان|भारत|বাংলা|ভারত|ਭਾਰਤ|ભારત|இந்தியா|இலங்கை|சிங்கப்பூர்|భారత్|ලංකා|ไทย|გე|中国|中國|台湾|台灣|新加坡|香港|한국)(?=[^0-9a-zA-Z@]|$))")),r.txt.regexen.validPunycode=t(/(?:xn--[0-9a-z]+)/),r.txt.regexen.validDomain=t(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),r.txt.regexen.validAsciiDomain=t(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),r.txt.regexen.invalidShortDomain=t(/^#{validDomainName}#{validCCTLD}$/),r.txt.regexen.validPortNumber=t(/[0-9]+/),r.txt.regexen.validGeneralUrlPathChars=t(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),r.txt.regexen.validUrlBalancedParens=t("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),r.txt.regexen.validUrlPathEndingChars=t(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),r.txt.regexen.validUrlPath=t("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),r.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,r.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,r.txt.regexen.extractUrl=t("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),r.txt.extractUrlsWithIndices=function(e,t){if(t||(t={extractUrlsWithoutProtocol:!0}),!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var i=[];r.txt.regexen.extractUrl.exec(e);){var n=RegExp.$2,a=RegExp.$3,o=RegExp.$4,s=RegExp.$5,l=RegExp.$7,u=r.txt.regexen.extractUrl.lastIndex,c=u-a.length;if(o)a.match(r.txt.regexen.validTcoUrl)&&(a=RegExp.lastMatch,u=c+a.length),i.push({url:a,indices:[c,u]});else{if(!t.extractUrlsWithoutProtocol||n.match(r.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var h=null,d=0;if(s.replace(r.txt.regexen.validAsciiDomain,function(e){var t=s.indexOf(e,d);d=t+e.length,h={url:e,indices:[c+t,c+d]},(l||e.match(r.txt.regexen.validSpecialShortDomain)||!e.match(r.txt.regexen.invalidShortDomain))&&i.push(h)}),null==h)continue;l&&(h.url=a.replace(s,h.url),h.indices[1]=u)}}return i},r}),sumo.define("jquery.timer",["jquery"],function(e){"use strict";if(null===e)throw"jQuery is not defined";var t=function(t){var r={timerCallback:function(){},startCallback:function(){},pauseCallback:function(){},resumeCallback:function(){},stopCallback:function(){},finishCallback:function(){},interval:1e3,timeout:!1,useSetTimeout:!0};t.interval=parseInt(t.interval,10),t.interval=isNaN(t.interval)?r.interval:t.interval,t.timeout=parseInt(t.timeout,10),t.timeout=isNaN(t.timeout)?r.timeout:t.timeout,this._options=e.extend(r,t),this._timerFunction=this._options.useSetTimeout?"Timeout":"Interval",this._timerID=null,this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._status="stopped"};t.prototype={_activate:function(){var e=this;this._startTime=(new Date).getTime(),this._timerID=window["set"+this._timerFunction](function(){e._passedTime=(new Date).getTime()-e._startTime,e._options.timeout&&e._passedTime>=e._options.timeout?e._finish():e._options.timerCallback()},this._options.interval)},_finish:function(){window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._timerID=null,this._options.finishCallback(),this._status="finished"},start:function(){0===this._startTime&&(this._activate(),this._options.startCallback(),this._status="running")},pause:function(){0!==this._startTime&&null!==this._timerID&&(window["clear"+this._timerFunction](this._timerID),this._passedTime=(new Date).getTime()-this._startTime,this._pausedInterval=this._passedTime%this._options.interval,this._timerID=null,this._options.pauseCallback(),this._status="paused")},resume:function(e){if(e="undefined"==typeof e?!1:e,-1!==this._pausedInterval){if(e){var t=this;setTimeout(function(){t._options.timerCallback(),t._options.useSetTimeout||t._activate()},this._options.interval-this._pausedInterval)}else this._activate();this._options.resumeCallback(),this._status="running"}},stop:function(){0!==this._startTime&&null!==this._timerID&&(this._finish(),this._options.stopCallback(),this._status="stopped")},kill:function(){null!==this._timerID&&(window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._timerID=null,this._status="stopped")},status:function(){return this._status}},e.timer=function(r,i,n,a){if("undefined"==typeof r)return e.timer["#LIST#"];if("string"!=typeof r||!r.match(/^[a-zA-Z][a-zA-Z_0-9]*$/))throw"Invalid timer name (it must start with a letter and cannot contain other characters than letters, numbers and underscore";if("undefined"==typeof i)return e.timer[r];if(null===i){if(e.timer[r]){e.timer[r].kill(),delete e.timer[r];var o=e.timer["#LIST#"].indexOf(r);o>-1&&e.timer["#LIST#"].splice(o,1)}return!0}if("function"!=typeof i)throw"Please provide a callback function for setTimer/setInterval function";if(n=parseInt(n,10),isNaN(n)||0>=n)throw"Please provide an interval for timer (in seconds)";return a=a||{},a.timerCallback=i,a.interval=n,e.timer[r]=new t(a),e.timer["#LIST#"].push(r),e.timer[r]},e.timer["#LIST#"]=[]}),sumo.define("jquery.naturalwidth",["jquery"],function(e){for(var t=["Width","Height"],r;r=t.pop();)!function(t,r){e.fn[t]=t in new Image?function(){return this[0][t]}:function(){var e=this[0],t,i;return"img"===e.tagName.toLowerCase()&&(t=new Image,t.src=e.src,i=t[r]),i}}("natural"+r,r.toLowerCase())}),sumo.define("jquery.drags",["jquery"],function(e){e.fn.drags=function(t){if(t=e.extend({handle:"",cursor:"move"},t),""===t.handle)var r=this;else var r=this.find(t.handle);return r.css("cursor",t.cursor).on("mousedown.drags",function(r){if(e(this).trigger("dragstart"),""===t.handle)var i=e(this).addClass("draggable");else var i=e(this).addClass("active-handle").parent().addClass("draggable");var n=i.css("z-index"),a=i.outerHeight(),o=i.outerWidth(),s=i.offset().top+a-r.pageY,l=i.offset().left+o-r.pageX;i.css("z-index",10000001).parents().on("mousemove.drags",function(t){var r=t.pageY+s-a,i=t.pageX+l-o;e(".draggable").trigger("dragmove",{top:r,left:i}),e(".draggable").offset({top:r,left:i}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",n)})}),r.preventDefault()}).on("mouseup.drags",function(){if(""===t.handle)var r=e(this).removeClass("draggable");else var r=e(this).removeClass("active-handle").parent().removeClass("draggable");r.parents().unbind("mousemove.drags"),e(this).trigger("dragend")})}}),sumo.define("jquery.resizes",["jquery"],function(e){e.fn.resizes=function(t){if(t=e.extend({handle:"",cursor:"se-resize",body:"",min_width:200,min_height:100,onResized:null},t),""===t.handle)var r=this;else var r=this.find(t.handle),i=this.find(t.body);return r.css("cursor",t.cursor).on("mousedown",function(r){if(""===t.handle)var n=e(this);else var n=e(this).parent();var a=n.css("z-index"),o=n.outerHeight(),s=n.outerWidth(),l=r.pageY,u=r.pageX,c=i.outerWidth(),h=i.outerHeight();n.css("z-index",10000001).parents().on("mousemove.jqueryResize",function(e){var r=!1;s+e.pageX-u>=t.min_width&&(r=!0,n.width(s+e.pageX-u)),o+e.pageY-l>=t.min_height&&(r=!0,n.height(o+e.pageY-l),i.height(h+e.pageY-l)),r&&(t.onResized?t.onResized():i.children().trigger("resize"))}),e(document).on("mouseup",function(){n.parents().off(".jqueryResize")}),r.preventDefault()})}}),sumo.define("jquery.ui.position",["jquery"],function(e){function t(e,t,r){return[parseInt(e[0],10)*(d.test(e[0])?t/100:1),parseInt(e[1],10)*(d.test(e[1])?r/100:1)]}function r(t,r){return parseInt(e.css(t,r),10)||0}function i(t){var r=t[0];return 9===r.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(r)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:r.preventDefault?{width:0,height:0,offset:{top:r.pageY,left:r.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a=Math.max,o=Math.abs,s=Math.round,l=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+%?/,h=/^\w+/,d=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,r,i=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=i.children()[0];return e("body").append(i),t=a.offsetWidth,i.css("overflow","scroll"),r=a.offsetWidth,t===r&&(r=i[0].clientWidth),i.remove(),n=t-r},getScrollInfo:function(t){var r=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),n="scroll"===r||"auto"===r&&t.width<t.element[0].scrollWidth,a="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var r=e(t||window),i=e.isWindow(r[0]);return{element:r,isWindow:i,offset:r.offset()||{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:i?r.width():r.outerWidth(),height:i?r.height():r.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return p.apply(this,arguments);n=e.extend({},n);var d,m,f,g,v,_,b=e(n.of),y=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(y),x=(n.collision||"flip").split(" "),C={};return _=i(b),b[0].preventDefault&&(n.at="left top"),m=_.width,f=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e=(n[this]||"").split(" "),t,r;1===e.length&&(e=l.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=l.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",t=c.exec(e[0]),r=c.exec(e[1]),C[this]=[t?t[0]:0,r?r[0]:0],n[this]=[h.exec(e[0])[0],h.exec(e[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===n.at[0]?v.left+=m:"center"===n.at[0]&&(v.left+=m/2),"bottom"===n.at[1]?v.top+=f:"center"===n.at[1]&&(v.top+=f/2),d=t(C.at,m,f),v.left+=d[0],v.top+=d[1],this.each(function(){var i,l,u=e(this),c=u.outerWidth(),h=u.outerHeight(),p=r(this,"marginLeft"),_=r(this,"marginTop"),I=c+p+r(this,"marginRight")+w.width,k=h+_+r(this,"marginBottom")+w.height,S=e.extend({},v),T=t(C.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?S.left-=c:"center"===n.my[0]&&(S.left-=c/2),"bottom"===n.my[1]?S.top-=h:"center"===n.my[1]&&(S.top-=h/2),S.left+=T[0],S.top+=T[1],e.support.offsetFractions||(S.left=s(S.left),S.top=s(S.top)),i={marginLeft:p,marginTop:_},e.each(["left","top"],function(t,r){e.ui.position[x[t]]&&e.ui.position[x[t]][r](S,{targetWidth:m,targetHeight:f,elemWidth:c,elemHeight:h,collisionPosition:i,collisionWidth:I,collisionHeight:k,offset:[d[0]+T[0],d[1]+T[1]],my:n.my,at:n.at,within:y,elem:u})}),n.using&&(l=function(e){var t=g.left-S.left,r=t+m-c,i=g.top-S.top,s=i+f-h,l={target:{element:b,left:g.left,top:g.top,width:m,height:f},element:{element:u,left:S.left,top:S.top,width:c,height:h},horizontal:0>r?"left":t>0?"right":"center",vertical:0>s?"top":i>0?"bottom":"middle"};c>m&&o(t+r)<m&&(l.horizontal="center"),h>f&&o(i+s)<f&&(l.vertical="middle"),a(o(t),o(r))>a(o(i),o(s))?l.important="horizontal":l.important="vertical",n.using.call(this,e,l)}),u.offset(e.extend(S,{using:l}))})},e.ui.position={fit:{left:function(e,t){var r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,n=r.width,o=e.left-t.collisionPosition.marginLeft,s=i-o,l=o+t.collisionWidth-n-i,u;t.collisionWidth>n?s>0&&0>=l?(u=e.left+s+t.collisionWidth-n-i,e.left+=s-u):l>0&&0>=s?e.left=i:s>l?e.left=i+n-t.collisionWidth:e.left=i:s>0?e.left+=s:l>0?e.left-=l:e.left=a(e.left-o,e.left)},top:function(e,t){var r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,n=t.within.height,o=e.top-t.collisionPosition.marginTop,s=i-o,l=o+t.collisionHeight-n-i,u;t.collisionHeight>n?s>0&&0>=l?(u=e.top+s+t.collisionHeight-n-i,e.top+=s-u):l>0&&0>=s?e.top=i:s>l?e.top=i+n-t.collisionHeight:e.top=i:s>0?e.top+=s:l>0?e.top-=l:e.top=a(e.top-o,e.top)}},flip:{left:function(e,t){var r=t.within,i=r.offset.left+r.scrollLeft,n=r.width,a=r.isWindow?r.scrollLeft:r.offset.left,s=e.left-t.collisionPosition.marginLeft,l=s-a,u=s+t.collisionWidth-n-a,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0],p,m;0>l?(p=e.left+c+h+d+t.collisionWidth-n-i,(0>p||p<o(l))&&(e.left+=c+h+d)):u>0&&(m=e.left-t.collisionPosition.marginLeft+c+h+d-a,(m>0||o(m)<u)&&(e.left+=c+h+d))},top:function(e,t){var r=t.within,i=r.offset.top+r.scrollTop,n=r.height,a=r.isWindow?r.scrollTop:r.offset.top,s=e.top-t.collisionPosition.marginTop,l=s-a,u=s+t.collisionHeight-n-a,c="top"===t.my[1],h=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1],m,f;0>l?(f=e.top+h+d+p+t.collisionHeight-n-i,e.top+h+d+p>l&&(0>f||f<o(l))&&(e.top+=h+d+p)):u>0&&(m=e.top-t.collisionPosition.marginTop+h+d+p-a,e.top+h+d+p>u&&(m>0||o(m)<u)&&(e.top+=h+d+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,r,i,n,a,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in i)t.style[a]=i[a];t.appendChild(s),r=o||document.documentElement,r.insertBefore(t,r.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",n=e(s).offset().left,e.support.offsetFractions=n>10&&11>n,t.innerHTML="",r.removeChild(t)}()}),sumo.define("jquery.nearest",["jquery","jquery.drags","jquery.resizes","jquery.ui.position"],function(e){function t(t,i,n){t||(t="div");var a=e(i.container),o=a.offset()||{left:0,top:0},s=[a.width()||0,a.height()||0],l={x:[o.left,o.left+s[0]],y:[o.top,o.top+s[1]],w:[0,s[0]],h:[0,s[1]]},u,c,h;for(u in l)l.hasOwnProperty(u)&&(h=r.exec(i[u]),h&&(c=l[u],i[u]=(c[1]-c[0])*h[1]/100+c[0]));i.sameX===!1&&i.checkHoriz===!1&&(i.sameX=!i.checkHoriz),i.sameY===!1&&i.checkVert===!1&&(i.sameY=!i.checkVert);var d=a.find(t),p=[],m=!!i.furthest,f=!i.sameX,g=!i.sameY,v=!!i.onlyX,_=!!i.onlyY,b=m?0:1/0,y=parseFloat(i.x)||0,w=parseFloat(i.y)||0,x=parseFloat(y+i.w)||y,C=parseFloat(w+i.h)||w,I=parseFloat(i.tolerance)||0,k=!!e.fn.each2,S=Math.min,T=Math.max;!i.includeSelf&&n&&(d=d.not(n)),0>I&&(I=0),d[k?"each2":"each"](function(t,r){var i=k?r:e(this),n=i.offset(),a=n.left,o=n.top,s=i.outerWidth(),l=i.outerHeight(),u=a+s,c=o+l,h=T(a,y),d=S(u,x),A=T(o,w),U=S(c,C),O=d>=h,$=U>=A,z,N,P,L;(f&&g||!f&&!g&&O&&$||f&&$||g&&O||f&&v||g&&_)&&(z=O?0:h-d,N=$?0:A-U,P=v||_?v?z:N:O||$?T(z,N):Math.sqrt(z*z+N*N),L=m?P>=b-I:b+I>=P,L&&(b=m?T(b,P):S(b,P),p.push({node:this,dist:P})))});var A=p.length,U=[],O,$,z,N;if(A)for(m?(O=b-I,$=b):(O=b,$=b+I),z=0;A>z;z++)N=p[z],N.dist>=O&&N.dist<=$&&U.push(N.node);return U}var r=/^([\d.]+)%$/;e.each(["nearest","furthest","touching"],function(r,i){var n={x:0,y:0,w:0,h:0,tolerance:1,container:document,furthest:"furthest"==i,includeSelf:!1,sameX:"touching"===i,sameY:"touching"===i,onlyX:!1,onlyY:!1};e[i]=function(r,i,a){if(!r||void 0===r.x||void 0===r.y)return e([]);var o=e.extend({},n,r,a||{});return e(t(i,o))},e.fn[i]=function(r,i){if(!this.length)return this.pushStack([]);var a;if(r&&e.isPlainObject(r))return a=e.extend({},n,r,i||{}),this.pushStack(t(this,a));var o=this.offset(),s={x:o.left,y:o.top,w:this.outerWidth(),h:this.outerHeight()};return a=e.extend({},n,s,i||{}),this.pushStack(t(r,a,this))}})}),sumo.define("jquery.article",["jquery"],function(e){e.expr[":"].emptytext=e.expr.createPseudo(function(t){return function(t){return""===e.trim(e(t).text())}}),e.fn.findIncludeSelf=function(t,r){var i;return i=":has(> p + p + p)"==t?this.find("p + p + p").parent():this.find(t),e(this).is(r)?i:i.addBack(t)},e.fn.exists=function(){return 0!==this.length},e.fn.findLeaves=function(r,i){var n=e(this),a=n.findIncludeSelf(r,"body").filter(i);return a=a.filter(t),a.filter(function(){return!e(this).find(a).exists()})},e.fn.findTrunks=function(r,i){var n=e(this),a=n.findIncludeSelf(r,"body").filter(i);return a=a.filter(t),a.filter(function(){return!e(this).parents().filter(a).exists()})};var t=function(){if(this._header||(this._header=i(e(this))),this._titleText||(this._titleText=o(this)),this._header){var t=.666*e(this).outerHeight();if(t&&this._header.outerHeight()>=t)return!1}return!0},r=function(t){var r=t||e("body").find("main, [role=main]").eq(0).get(0)||"body",i=e(),n=':not("[class^=comment],[id^=comment],[class*=footer],.sidebar:not(body) *,aside *,#sidebar *,footer *,[class*=footer]:not(body, [class*=not-footer]) *,#comments *,#livefyre-comments *,[class^=fyre] *,[class^=comment],[id^=comment] *,[class*=related-post]:not(body) *,.archive-page,.aside,.hentry-metro,.hrf-entry,:emptytext,.tve-leads-lightbox article")',a=[];a.push("article"),a.push(".post"),a.push(".entry-content"),a.push(".post-content"),a.push(".post_box"),a.push(".post-item"),a.push(".blog-post-wrapper"),a.push(".type-post"),a.push("#content"),a.push(".blog_content"),"body"!=r?(a.push(".hentry"),a.push(".content")):(a.push("main .hentry"),a.push("[role=main] .hentry"),a.push("main .content"),a.push("[role=main] .content")),a.push("#post-content"),a.push("#blog-content"),a.push(".blog-post");for(var o=[":has(> p + p + p)"],s=0;s<a.length;s++)if(i=e(r).findLeaves(a[s],n),i.length>0)return i;for(var s=0;s<o.length;s++)if(i=e(r).findTrunks(o[s],n),i.length>0)return i;var i,l,u,c;return i},i=function(t){var r=null,i=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],n={};try{i.forEach(function(i){if(r=e(t).find(i),r.length>0)throw n})}catch(a){if(a===n)return r.eq(0);throw a}return null},n=function(t){var r=null,i=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not(.post-meta-info *, [class^=comment-count], [class^=comments-link], [class^=comments-number], li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],n={};
try{i.forEach(function(i){if(r=e(t).find(i),r.length>0)throw n})}catch(a){if(a===n)return r.eq(0).hasClass("fb-comments")&&r.eq(0).prev("h3 + p").length>0?r.eq(0).prev("h3 + p").prev("h3"):r.eq(0);throw a}return null},a=function(e){return i(e)},o=function(e){var t=null;return!e._title&&e._header&&(e._title=e._header),e._title&&(t=e._title.text().trim()),t},s=function(t){var r=null,i=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],n={};try{i.forEach(function(i){if(r=e(t).find(i).filter("[href]"),r.length>0)throw n})}catch(a){if(a===n)return r.eq(0);throw a}return null};e.articles=function(t){if("__smCache"in window&&"articles"in window.__smCache)return window.__smCache.articles;var l=r(t);return l.each(function(){this._header||(this._header=i(e(this))),this._footer=n(e(this)),this._title=this._header?a(this._header):null,this._titleText||(this._titleText=o(this));var t=this._header?s(this._header):null;t?this._anchor=t:this._anchor=s(e(this)),this._anchor?this._url=this._anchor.attr("href"):this._url=null,this._url||(this._url=window.location.href)}),"__smDebug"in window&&window.__smDebug&&l.each(function(){e(this).css("background","rgba(0,0,255,.5)"),this._header&&this._header.css("background","rgba(0,255,0,.5)"),this._title&&this._title.css("background","rgba(255,0,0,.5)"),this._footer&&this._footer.css("background","rgba(255,255,0,.5)")}),"__smCache"in window||(window.__smCache={}),window.__smCache.articles=l,setTimeout(function(){"__smCache"in window&&delete window.__smCache.articles},1e4),l},e.article=function(){return e.articles().eq(0)}}),sumo.define("jquery.displayrules",["jquery","URI","jquery.article"],function(e,t){e.isCurrentUrlAllowed=function(r,i,n,a){function o(e,t,r,i){var n=[];if(e&&e.length)for(var a=0;a<e.length;a++){var o=e[a];if("object"==typeof o&&o.hasOwnProperty(t)&&o[t]==r&&(n.push(o),i))return n[0]}return i?null:n}if(r&&r.length){var s=o(r,"filter_type","article",!0),l=[];s&&(l=e.articles()),n||(n=!1);var u=function(e){for(var t=Object.keys(e),r=t.length,i=Array(r),n=0;r>n;n++)i[n]=[t[n],e[t[n]]];return i},c=function(e){var t=u(e),r=t.length;return function(e){if(null==e)return!r;e=new Object(e);for(var i=0;r>i;i++){var n=t[i],a=n[0];if(n[1]!==e[a]||!(a in e))return!1}return!0}},h=function(e){var e=e.substr(1).split("&");if(""==e)return{};for(var t={},r=0;r<e.length;++r){var i=e[r].split("=",2);if(1==i.length)t[i[0]]="";else try{t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}catch(n){t[i[0]]=i[1].replace(/\+/g," ")}}return t},d=function(e,t,r){if(e.has_hash&&e.hash!=t)return!1;if(e.has_query_params){var i=h(e.search),n=h(r),a=c(i);if(a(n))return!0;if(!(["containing","beginning"].indexOf(e.filter_type)>=0))return!1;for(var o=!0,s=Object.keys(i),l=0;l<s.length;l++){var u=s[l],d=i[s[l]];if(d&&d.length)if(u in n){if(0!=n[u].indexOf(d))return!1}else{if("containing"!=e.filter_type)return!1;var p=!1;if(Object.keys(n).forEach(function(e){e.lastIndexOf(u)>=0&&u==e.substring(e.lastIndexOf(u))&&0==n[e].indexOf(d)&&(p=!0)}),!p)return!1}else{if(u in n)continue;for(var m=Object.keys(n),p=!1,f=0;f<m.length;f++){var g=m[f];if(0==g.indexOf(u)){p=!0;break}}if(!p)return!1}}}return!0},p=o(r,"parsedUserAgent",!0,!0),m=window.location.toString();m&&(m=m.toLowerCase());var f=window.location.pathname.toString();f&&(f=f.toLowerCase());var g=window.location.hostname+f;g&&(g=g.toLowerCase()),"/"==f[f.length-1]&&(f=f.substring(0,f.length-1),g=g.substring(0,g.length-1)),0==g.indexOf("www.")&&(g=g.substring(4));var v=window.location.search;v&&(v=v.toLowerCase());var _=window.location.hash;_&&(_=_.toLowerCase(),"#"!=_[0]&&(_="#"+_));for(var b=h(v),y=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),w=document.cookie.split(";"),x={},C=[],I=0;I<w.length;I++){var k=w[I].substring(0,w[I].indexOf("=")).trim(),S=w[I].substring(w[I].indexOf("=")+1).trim();C.push(k),x[k]=S}var T=document.getElementsByTagName("meta"),A=document.referrer;if(A&&A.length){A=A.toLowerCase();try{var U=t(A);if(U.is("ip")){var O=U.hostname();O&&(O=O.toLowerCase())}else{var O=U.domain();O&&(O=O.toLowerCase())}var $=U.path();$&&($=$.toLowerCase());var z=U.tld();z&&(z=z.toLowerCase());var N=U.hostname()?U.hostname().toLowerCase()+$:$;"/"==$[$.length-1]&&($=$.substring(0,$.length-1),N=N.substring(0,N.length-1)),0==N.indexOf("www.")&&(N=N.substring(4));var P=U.search(),L=U.hash()}catch(E){A=!1}}else A=!1;var q=function(t){var r=!1;return e.each(t,function(e,t){var i=!1;return t.forEach(function(e){var t=!1;if(!i)if("article"==e.filter_type)1==l.length&&(t=!0);else if("smaller"==e.filter_type)(isNaN(parseFloat(e.filter_value))||y<parseFloat(e.filter_value))&&(t=!0);else if("bigger"==e.filter_type)(isNaN(parseFloat(e.filter_value))||y>=parseFloat(e.filter_value))&&(t=!0);else if("views_lt"==e.filter_type)(isNaN(e.pageviews)||a<e.pageviews)&&(t=!0);else if("views_eq"==e.filter_type)(isNaN(e.pageviews)||a==e.pageviews)&&(t=!0);else if("views_gt"==e.filter_type)(isNaN(e.pageviews)||a>e.pageviews)&&(t=!0);else if("countryis"==e.filter_type)n==e.filter_value.toLowerCase()&&(t=!0);else if("countryisnot"==e.filter_type)n&&n==e.filter_value.toLowerCase()||(t=!0);else if("c_exists"==e.filter_type)C.indexOf(e.filter_value)>=0&&(t=!0);else if("c_dne"==e.filter_type)C.indexOf(e.filter_value)<0&&(t=!0);else if("c_equals"==e.filter_type)C.indexOf(e.filter_value)>=0&&x[e.filter_value]==e.param_value&&(t=!0);else if("c_notequals"==e.filter_type)(C.indexOf(e.filter_value)<0||x[e.filter_value]!=e.param_value)&&(t=!0);else if("c_contains"==e.filter_type)C.indexOf(e.filter_value)>=0&&x[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if("c_notcontains"==e.filter_type)(C.indexOf(e.filter_value)<0||x[e.filter_value].indexOf(e.param_value)<0)&&(t=!0);else if("mt_equals"===e.filter_type)for(var r=0;r<T.length;r++){var o=T[r].getAttribute(e.filter_value);o&&o.toLowerCase()===e.param_value&&(t=!0)}else if("mt_notequals"===e.filter_type){for(var s=!1,r=0;r<T.length;r++){var o=T[r].getAttribute(e.filter_value);o&&o.toLowerCase()===e.param_value&&(s=!0)}t=!s}else if("mt_contains"===e.filter_type)for(var r=0;r<T.length;r++){var o=T[r].getAttribute(e.filter_value);o&&-1!==o.toLowerCase().indexOf(e.param_value)&&(t=!0)}else if("mt_notcontains"===e.filter_type){for(var s=!1,r=0;r<T.length;r++){var o=T[r].getAttribute(e.filter_value);o&&-1!==o.toLowerCase().indexOf(e.param_value)&&(s=!0)}t=!s}else if("mt_beginning"===e.filter_type)for(var r=0;r<T.length;r++){var o=T[r].getAttribute(e.filter_value);o&&o.toLowerCase().substring(0,e.param_value.length)===e.param_value&&(t=!0)}else if("q_exists"==e.filter_type)b&&b.hasOwnProperty(e.filter_value.toLowerCase())&&(t=!0);else if("q_dne"==e.filter_type)b&&b.hasOwnProperty(e.filter_value)||(t=!0);else if("q_equals"==e.filter_type)b&&b[e.filter_value]&&b[e.filter_value]==e.param_value&&(t=!0);else if("q_notequals"==e.filter_type)b&&b[e.filter_value]&&b[e.filter_value]==e.param_value||(t=!0);else if("q_contains"==e.filter_type)b&&b[e.filter_value]&&b[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if("q_notcontains"==e.filter_type)(!b||!b[e.filter_value]||b[e.filter_value].indexOf(e.param_value)<0)&&(t=!0);else if("exact"==e.filter_type){var u=d(e,_,v);u&&(e.full_url?g==e.match_url&&(t=!0):null==e.match_url&&u?t=!0:(g==e.match_url||f==e.match_url)&&(t=!0))}else if("beginning"==e.filter_type){var u=d(e,_,v);u&&(e.full_url?0==g.indexOf(e.match_url.toLowerCase())&&(t=!0):null==e.match_url&&u?t=!0:(0==g.indexOf(e.match_url.toLowerCase())||0==f.indexOf(e.match_url.toLowerCase()))&&(t=!0))}else if("containing"==e.filter_type){var u=d(e,_,v);u&&(e.full_url?g.indexOf(e.match_url.toLowerCase())>=0&&(t=!0):null==e.match_url&&u?t=!0:g.indexOf(e.match_url.toLowerCase())>=0&&(t=!0))}else if(A&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(e.filter_type)>=0)if("r_url_exact"==e.filter_type){var u=d(e,L,P);e.full_url?u&&N==e.match_url.toLowerCase()&&(t=!0):u&&N==e.match_url.toLowerCase()?t=!0:null==e.match_url&&u&&(t=!0)}else if("r_domain_exact"==e.filter_type)e.host?e.host==O&&(t=!0):e.filter_value==O&&(t=!0);else if("r_url_beginning"==e.filter_type){var u=d(e,L,P);e.full_url?u&&0==N.indexOf(e.match_url)&&(t=!0):u&&0==N.indexOf(e.match_url)?t=!0:null==e.match_url&&u&&(t=!0)}else if("r_domain_beginning"==e.filter_type)e.host&&0==O.indexOf(e.host)?t=!0:0==O.indexOf(e.filter_value)&&(t=!0);else if("r_url_containing"==e.filter_type){var u=d(e,L,P);e.full_url?u&&N.indexOf(e.match_url)>=0&&(t=!0):u&&N.indexOf(e.match_url)>=0?t=!0:null==e.match_url&&u&&(t=!0)}else"r_domain_containing"==e.filter_type&&(e.host&&O.indexOf(e.host)>=0?t=!0:O.indexOf(e.filter_value)>=0&&(t=!0));else if("ua_os"==e.filter_type&&p&&p.compareOS){var c=[e.filter_value];"winmobile"==e.filter_value?c=["windows mobile","windows phone"]:"macos"==e.filter_value?c=["mac os"]:"windesktop"==e.filter_value&&(c=["windows"]),c.indexOf(p.compareOS)>=0&&(t=!0)}else if("ua_browser"==e.filter_type&&p&&p.compareBrowser){var c=[e.filter_value];"chrome"==e.filter_value?c=["chrome","chromium"]:"ie"==e.filter_value?c=["ie","ie mobile"]:"opera"==e.filter_value?c=["opera","opera mini","opera mobile","opera tablet"]:"safari"==e.filter_value&&(c=["safari","mobile safari"]),c.indexOf(p.compareBrowser)>=0&&(t=!0)}else if("ua_exact"==e.filter_type)e.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(t=!0);else if("ua_beginning"==e.filter_type)0==navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())&&(t=!0);else if("ua_containing"==e.filter_type)navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())>=0&&(t=!0);else if("hash_exact"==e.filter_type){var h="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;h.toLowerCase()==_.toLowerCase()&&(t=!0)}else if("hash_beginning"==e.filter_type){var h="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;0==_.toLowerCase().indexOf(h.toLowerCase())&&(t=!0)}else if("hash_containing"==e.filter_type){var h="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;_.toLowerCase().indexOf(h.toLowerCase())>=0&&(t=!0)}else"all"==e.filter_type&&(t=!0);t||(i=!0)}),i?void 0:(r=!0,!1)}),r},F=o(r,"rule_type","include",!1);if(F&&F.length){var D={},j=0;F.forEach(function(e){e.group_id&&e.group_id.length?D.hasOwnProperty(e.group_id)?D[e.group_id].push(e):D[e.group_id]=[e]:(D[j]=[e],j+=1)}),currentUrlIncluded=q(D)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var Q=o(r,"rule_type","exclude",!1),W=!1;if(!Q||!Q.length)return!0;var R={},j=0;return Q.forEach(function(e){e.group_id&&e.group_id.length?R.hasOwnProperty(e.group_id)?R[e.group_id].push(e):R[e.group_id]=[e]:(R[j]=[e],j+=1)}),W=q(R),W?!1:!0}return!0}}),sumo.define("55c989d5-855d-4538-b67b-3cdb46acd968/sharer",["jquery","URI","color","articles","plugins/text!55c989d5-855d-4538-b67b-3cdb46acd968/templates/sharer_popup.html","vex","twitter-text","jquery.timer","jquery.naturalwidth","jquery.nearest","jquery.displayrules"],function(e,t,r,i,n,a,o,s){e.expr[":"].invisible=e.expr.createPseudo(function(t){return function(t){if("hidden"==e(t).css("visibility")||0==e(t).css("opacity"))return!0;var r=e(t).parent();return r?r.is(":invisible"):!1}});var l=function(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},u={currentImage:null,buttonEl:null,win:null,currentImageUrl:null,currentImageData:null,useUrlShortener:!0,shortener:"sumoly",short_domain:null,useAltText:!0,twitterUsername:null,color:null,position:null,contentOnly:!1,ignoreLinks:!0,ignoreImgLinks:!1,relShareOnly:!1,ctry:!1,shortUrls:{},scope:function(){if(u.contentOnly){var t=i.findAll();return e(t)}return e(document)},load:function(){e.ajax({type:"POST",dataType:"json",xhrFields:{withCredentials:!1},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/image-sharer/load",data:{site_id:u.api.properties.siteId,geoLocation:u.api.properties.geoLocation,pageViews:u.api.properties.views,userAgent:navigator.userAgent},success:function(e){e.success&&(u.useAltText=e.use_alt_text,u.useUrlShortener=e.use_url_shortener,u.shortener=e.shortener,u.shortDomain=e.short_domain,u.contentOnly=e.content_only,u.ignoreLinks=e.ignore_links,u.ignoreImgLinks=e.ignore_img_links,u.relShareOnly=e.rel_share_only,u.twitterUsername=e.twitter_username,u.color=e.color,u.utm=e.utm,u.utm_source=e.utm_source,u.utm_medium=e.utm_medium,u.utm_name=e.utm_name,u.utm_custom_key=e.utm_custom_key,u.utm_custom_val=e.utm_custom_val,u.vertical=e.vertical,u.vertical_offset=parseInt(e.vertical_offset),u.vertical_offset_type=e.vertical_offset.replace(/[0-9]/g,""),u.horizontal_offset=parseInt(e.horizontal_offset),u.horizontal_offset_type=e.horizontal_offset.replace(/[0-9]/g,""),u.pro=e.pro,u.position=e.position,u.display_rules=e.display_rules,u.services=e.services,u.ctry=u.api.properties.geoLocation&&u.api.properties.geoLocation.ctry?u.api.properties.geoLocation.ctry:!1,u.views=u.api.properties.views&&u.api.properties.views?u.api.properties.views:!1,u.reflink="https://sumome.com/?src=sm-is-"+u.api.properties.siteId,u.setup())}})},cleanup:function(){var t=u.scope();t.off(".image-sharer"),e(window).off(".image-sharer")},init:function(){n=n.replace("{{preloader}}",u.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/preloader.gif"),e(window).on("scroll",u.debounce(function(){u.scroll()},1)),u.load(),u.api.on("55c989d5-855d-4538-b67b-3cdb46acd968/service/settings",function(e){u.hideSharer(),u.cleanup(),u.useAltText=e.use_alt_text,u.contentOnly=e.content_only,u.ignoreLinks=e.ignore_links,u.ignoreImgLinks=e.ignore_img_links,u.relShareOnly=e.rel_share_only,u.useUrlShortener=e.use_url_shortener,u.shortener=e.shortener,u.shortDomain=e.short_domain,u.twitterUsername=e.twitter_username,u.color=e.color,u.utm=e.utm,u.utm_source=e.utm_source,u.utm_medium=e.utm_medium,u.utm_name=e.utm_name,u.utm_custom_key=e.utm_custom_key,u.utm_custom_val=e.utm_custom_val,u.pro=e.pro,u.position!=e.position&&(u.position=e.position,u.positionSharer()),u.display_rules=e.display_rules,u.services=e.services,u.setup()})},setup:function(){u.buttonEl=e('<div class="sumome-image-sharer"></div>');var t=u.services.slice(0);if(t.forEach(e.proxy(function(t){var i=e('<a href="javascript:void(0);" class="sumome-image-sharer-'+t+'"><div></div></a>');if(u.vertical&&i.addClass("sumome-image-sharer-vertical"),u.color){var n={backgroundColor:u.color,borderColor:r.shadeColor(u.color,-5)};i.css(n).hover(e.proxy(function(){e(this).css({backgroundColor:r.shadeColor(u.color,5),borderColor:u.color})}),e.proxy(function(){e(this).css(n)}));var a={};"black"==r.whiteOrBlack(u.color)&&(a.backgroundImage='url("'+this.api.properties.baseUrl+"images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/"+t+'-black-60.png")'),i.find("div").css(a).hover(e.proxy(function(){e(this).css(a)}))}u.buttonEl.append(i)},u)),u.vertical?(u.buttonEl.css("width",40),u.buttonEl.css("height",40*u.services.length)):u.buttonEl.css("width",40*u.services.length),u.buttonEl.on("click","a.sumome-image-sharer-twitter",u.openTwitter),u.buttonEl.on("click","a.sumome-image-sharer-facebook",u.openFacebook),u.buttonEl.on("click","a.sumome-image-sharer-pinterest",u.openPinterest),u.buttonEl.on("click","a.sumome-image-sharer-tapiture",u.openTapiture),u.buttonEl.on("click","a.sumome-image-sharer-tumblr",u.openTumblr),u.buttonEl.on("click","a.sumome-image-sharer-yummly",u.openYummly),e("body").append(u.buttonEl),e.isCurrentUrlAllowed(u.display_rules,null,u.ctry,u.views)){var i=u.scope();i.on("mouseenter.image-sharer","img",u.debounce(u.mouseenter,250)),i.on("mouseleave.image-sharer","img",u.debounce(u.mouseleave,250)),e(window).on("touchstart.image-sharer",u.debounce(u.touch,200)),e(window).on("resize.image-sharer",u.throttle(u.positionSharer,150))}},debounce:function(e,t){var r;return function(){var i=this,n=arguments;clearTimeout(r),r=setTimeout(function(){r=null,e.apply(i,n)},t),r||e.apply(i,n)}},throttle:function(e,t){var r,i,n,a=null,o=0,s=function(){o=(new Date).getTime(),a=null,n=e.apply(r,i),a||(r=i=null)};return function(){var l=(new Date).getTime();o||(o=l);var u=t-(l-o);return r=this,i=arguments,0>=u||u>t?(clearTimeout(a),a=null,o=l,n=e.apply(r,i),a||(r=i=null)):a||(a=setTimeout(s,u)),n}},openFacebook:function(r){r.preventDefault(),u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-click"}),u.useAltText?u.currentImageAlt=u.currentImage.attr("alt")||e(document).find("title").text()||"":u.currentImageAlt=e(document).find("title").text()||"",u.currentImageUrl=new t(u.currentImage.attr("src")).absoluteTo(window.location.toString()).toString(),u.currentImageData=u.getImageData(u.currentImage),u.$modal=a.open({content:n,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),u.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.kill()}),u.$modal.on("vexResize",e.proxy(function(t,r){var i=Math.max((e(window).height()-r.$vexContent.outerHeight())/2,0);r.$vex.css({"padding-top":i+"px"})},this)),u.$modal.on("vexOpen",e.proxy(function(e,t){u.$modal.resize(),u.loadFacebookMarkup()},this))},generateShare:function(t){var r=window.location.href;if(r=u.checkAndAddUTMParams(r,"facebook"),u.useUrlShortener){var i=u.shortener+":"+r;i in u.shortUrls?u.generateShareFromUrl(t,u.shortUrls[i]):e.ajax({type:"POST",dataType:"json",url:u.api.properties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:u.api.properties.siteId,href:r},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(u.shortUrls[i]=e.url,r=e.url),u.generateShareFromUrl(t,r)})}else u.generateShareFromUrl(t,r)},generateShareFromUrl:function(e,t){e=(e+" "+t).trim(),u.$modal.find("textarea").val(e),u.$modal.find(".sumome-image-sharer-link").attr("href",u.reflink),u.$modal.find(".sumome-image-sharer-fb-message").text(e)},loadFacebookMarkup:function(t){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/image-sharer/facebook/load",data:{site_id:u.api.properties.siteId},statusCode:{401:function(){t||u.loadFacebookMarkup()}},success:function(t){t=t.replace("{{sumome-icon}}",u.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),t=t.replace("{{facebook-icon}}",u.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/facebook-icon-128.png"),e("#sumome-image-sharer").html(t);var r=e("#sumome-image-sharer .sumome-connect");r.length>0?(u.goSmall(),u.$modal.find(".sumome-image-sharer-link").attr("href",u.reflink),r.click(u.authenticateFacebook)):(u.goLarge(),u.$modal.find(".sumome-image-sharer-fb-image").css("background-image","url("+u.currentImageUrl+")"),u.generateShare(u.currentImageAlt),u.$modal.find("select").change(function(){var t=e(this).find("option").filter(":selected"),r=t.text(),i=t.attr("value"),n=t.data("access-token");u.$modal.find(".sumome-image-sharer-fb-user img").attr("src","https://graph.facebook.com/v2.7/"+i+"/picture?access_token="+n),u.$modal.find(".sumome-image-sharer-fb-user a").text(r)}),u.$modal.find("textarea").on("keyup",function(){u.$modal.find(".sumome-image-sharer-fb-message").text(e(this).val())}),u.$modal.find("button").click(u.submitFacebook),u.$modal.find(".sumome-image-sharer-fb-message").focus(),u.$modal.resize())}})},checkFacebookWindowClosed:function(){u.isAuthWindowClosed()?u.loadFacebookMarkup():setTimeout(u.checkFacebookWindowClosed,500)},authenticateFacebook:function(){u.isAuthWindowClosed()?(u.win=window.open(u.api.properties.sumoUrl+"/apps/image-sharer/facebook/login","image-sharer-auth","width=640,height=400"),u.win.focus(),u.checkFacebookWindowClosed()):(u.win.location=u.api.properties.sumoUrl+"/apps/image-sharer/facebook/login",u.win.resizeTo(640,400),u.win.focus(),u.checkFacebookWindowClosed())},submitFacebook:function(){var t=u.$modal.find("textarea").val().trim(),r=u.currentImageUrl,i=u.$modal.find("option").filter(":selected"),n=i.text(),a=i.attr("value"),o=i.data("access-token");u.$modal.find("select, textarea, button").prop("disabled",!0),e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/image-sharer/facebook/post",data:{status:t,image_url:r,image_data:u.currentImageData,targetId:a,targetToken:o},statusCode:{401:function(){u.loadFacebookMarkup()},500:function(){u.close()}},success:function(t){t.success?(u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-share"}),u.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){u.close()}),u.$modal.resize(),e.timer("closeImageSharer",u.close,3e3).start()):(u.goSmall(),u.showError(t.error),e("#sumome-image-sharer").find("button").click(function(e){u.close()}),u.$modal.resize())}})},openTumblr:function(r){r.preventDefault(),u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tumblr-click"}),u.useAltText?u.currentImageAlt=u.currentImage.attr("alt")||e(document).find("title").text()||"":u.currentImageAlt=e(document).find("title").text()||"",u.currentImageUrl=new t(u.currentImage.attr("src")).absoluteTo(window.location.toString()).toString(),u.currentImageData=u.getImageData(u.currentImage),u.$modal=a.open({content:n,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),u.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.stop()}),u.$modal.on("vexResize",e.proxy(function(t,r){var i=Math.max((e(window).height()-r.$vexContent.outerHeight())/2,0);r.$vex.css({"padding-top":i+"px"})},this)),u.$modal.on("vexOpen",e.proxy(function(e,t){u.$modal.resize(),u.loadTumblrMarkup()},this))},loadTumblrMarkup:function(t){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/image-sharer/tumblr/load",data:{site_id:u.api.properties.siteId},statusCode:{401:function(){t||u.loadTumblrMarkup()}},success:function(t){t=t.replace("{{sumome-icon}}",u.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),t=t.replace("{{tumblr-icon}}",u.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/tumblr-icon-128.png"),e("#sumome-image-sharer").html(t);var r=e("#sumome-image-sharer .sumome-connect");r.length>0?(u.goSmall(),u.$modal.find(".sumome-image-sharer-link").attr("href",u.reflink),r.click(u.authenticateTumblr)):(u.goLarge(),u.$modal.find(".sumome-image-sharer-tm-image").css("background-image","url("+u.currentImageUrl+")"),u.generateTumblr(u.currentImageAlt),u.$modal.find("textarea").on("keyup",function(){u.$modal.find(".sumome-image-sharer-tm-message").text(e(this).val())}),u.$modal.find("button").click(u.submitTumblr),u.$modal.find(".sumome-image-sharer-tm-message").focus(),u.$modal.resize())}})},generateTumblr:function(t){var r=window.location.href;if(r=u.checkAndAddUTMParams(r,"tumblr"),u.useUrlShortener){var i=u.shortener+":"+r;i in u.shortUrls?u.generateShareFromUrl(t,u.shortUrls[i]):e.ajax({type:"POST",dataType:"json",url:u.api.properties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:u.api.properties.siteId,href:r},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(u.shortUrls[i]=e.url,r=e.url),t=(t+" "+r).trim(),u.$modal.find("textarea").val(t),u.$modal.find(".sumome-image-sharer-tm-message").text(t)})}else t=(t+" "+r).trim(),u.$modal.find("textarea").val(t),u.$modal.find(".sumome-image-sharer-link").attr("href",u.reflink),u.$modal.find(".sumome-image-sharer-tm-message").text(t)},checkTumblrWindowClosed:function(){u.isAuthWindowClosed()?u.loadTumblrMarkup():setTimeout(u.checkTumblrWindowClosed,500)},authenticateTumblr:function(){u.isAuthWindowClosed()?(u.win=window.open(u.api.properties.sumoUrl+"/apps/image-sharer/tumblr/login","image-sharer-auth","width=740,height=400"),u.win.focus(),u.checkTumblrWindowClosed()):(u.win.location=u.api.properties.sumoUrl+"/apps/image-sharer/tumblr/login",u.win.resizeTo(740,400),u.win.focus(),u.checkTumblrWindowClosed())},submitTumblr:function(){var t=u.$modal.find("textarea").val().trim(),r=u.currentImageUrl,i=u.$modal.find("select").val();u.$modal.find("textarea, button, select").prop("disabled",!0),e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/image-sharer/tumblr/post",data:{status:t,image_url:r,image_data:u.currentImageData,base_hostname:i},statusCode:{401:function(){u.loadTumblrMarkup()}},success:function(t){t.success?(u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tumblr-share"}),u.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){u.close()}),u.$modal.resize(),e.timer("closeImageSharer",u.close,3e3).start()):(u.goSmall(),u.showError(t.error),e("#sumome-image-sharer").find("button").click(function(e){u.close()}),u.$modal.resize())}})},openTwitter:function(r){r.preventDefault(),u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-click"}),u.useAltText?u.currentImageAlt=u.currentImage.attr("alt")||e(document).find("title").text()||"":u.currentImageAlt=e(document).find("title").text()||"",u.currentImageUrl=new t(u.currentImage.attr("src")).absoluteTo(window.location.toString()).toString(),u.currentImageData=u.getImageData(u.currentImage),u.$modal=a.open({content:n,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),u.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.stop()}),u.$modal.on("vexResize",e.proxy(function(t,r){var i=Math.max((e(window).height()-r.$vexContent.outerHeight())/2,0);r.$vex.css({"padding-top":i+"px"})},this)),u.$modal.on("vexOpen",e.proxy(function(e,t){u.$modal.resize(),u.loadTwitterMarkup()},this))},generateTweet:function(t){var r=window.location.href;if(r=u.checkAndAddUTMParams(r,"twitter"),u.useUrlShortener){var i=u.shortener+":"+r;i in u.shortUrls?u.generateTweetFromUrl(t,u.shortUrls[i]):e.ajax({type:"POST",dataType:"json",url:u.api.properties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:u.api.properties.siteId,href:r},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(u.shortUrls[i]=e.url,r=e.url),u.generateTweetFromUrl(t,r)})}else u.generateTweetFromUrl(t,r)},generateTweetFromUrl:function(e,t){var r=("https:"==t.substr(0,6),23),i=u.twitterUsername,n=116-r;i&&("@"!=i.substr(0,1)&&(i="@"+i),n-=5+i.length),e=e.trim(),e=e.replace(/\r\n|\n|\r/g," "),e.length+1>n&&(e=e.substr(0,n-2)+"…"),e=(e+" "+t+(i?" via "+i:"")).trim(),u.$modal.find("textarea").val(e),u.$modal.find(".sumome-image-sharer-link").attr("href",u.reflink),u.$modal.find(".sumome-image-sharer-tw-message").text(e),u.updateTwitterCount()},updateTwitterCount:function(){var e=u.$modal.find("textarea").val().trim(),t=u.charactersLeft(e);u.$modal.find(".sumome-image-sharer-tw-count").html(t+" chars remaining"),0>t?u.$modal.find(".sumome-image-sharer-tw-count").css({color:"red"}):u.$modal.find(".sumome-image-sharer-tw-count").css({color:""})},loadTwitterMarkup:function(t){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/image-sharer/twitter/load",data:{site_id:u.api.properties.siteId},statusCode:{401:function(){t||u.loadTwitterMarkup()}},success:function(t){t=t.replace("{{sumome-icon}}",u.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),t=t.replace("{{twitter-icon}}",u.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/twitter-icon-128.png"),e("#sumome-image-sharer").html(t);var r=e("#sumome-image-sharer .sumome-connect");r.length>0?(u.goSmall(),u.$modal.find(".sumome-image-sharer-link").attr("href",u.reflink),r.click(u.authenticateTwitter)):(u.goLarge(),u.$modal.find(".sumome-image-sharer-tw-image").css("background-image","url("+u.currentImageUrl+")"),u.generateTweet(u.currentImageAlt),u.$modal.find("textarea").on("keyup",function(){u.$modal.find(".sumome-image-sharer-tw-message").text(e(this).val()),u.updateTwitterCount()}),u.$modal.find("button").click(u.submitTwitter),u.$modal.find(".sumome-image-sharer-tw-message").focus(),u.$modal.resize())}})},checkTwitterWindowClosed:function(){u.isAuthWindowClosed()?u.loadTwitterMarkup():setTimeout(u.checkTwitterWindowClosed,500)},authenticateTwitter:function(){u.isAuthWindowClosed()?(u.win=window.open(u.api.properties.sumoUrl+"/apps/image-sharer/twitter/login","image-sharer-auth","width=740,height=400"),u.win.focus(),u.checkTwitterWindowClosed()):(u.win.location=u.api.properties.sumoUrl+"/apps/image-sharer/twitter/login",u.win.resizeTo(740,400),u.win.focus(),u.checkTwitterWindowClosed())},submitTwitter:function(){var t=u.$modal.find("textarea").val().trim(),r=u.currentImageUrl;u.$modal.find("textarea, button").prop("disabled",!0);var t=u.$modal.find("textarea").val().trim(),i=u.charactersLeft(t);i>=0?e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/image-sharer/twitter/post",data:{status:t,image_url:r,image_data:u.currentImageData},statusCode:{401:function(){u.loadTwitterMarkup()}},success:function(t){t.success?(u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-share"}),u.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){u.close()}),u.$modal.resize(),e.timer("closeImageSharer",u.close,3e3).start()):(u.goSmall(),u.showError(t.error),e("#sumome-image-sharer").find("button").click(function(e){u.close()}),u.$modal.resize())}}):u.$modal.find("textarea, button").prop("disabled",!1)},openPinterest:function(r){r.preventDefault(),u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"pinterest-click"}),u.useAltText?u.currentImageAlt=u.currentImage.attr("alt")||e(document).find("title").text()||"":u.currentImageAlt=e(document).find("title").text()||"",u.currentImageUrl=new t(u.currentImage.attr("src")).absoluteTo(window.location.toString()).toString();var i=window.location.toString();i=u.checkAndAddUTMParams(i,"pinterest"),u.closeAuthWindow(),u.win=window.open(u.generatePinterestUrl(i),"image-sharer-pinterest","width=640,height=320")},generatePinterestUrl:function(t){var r={url:t,media:u.currentImageUrl,description:u.currentImageAlt};return"http://pinterest.com/pin/create/button/?"+e.param(r)},openTapiture:function(r){r.preventDefault(),u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tapiture-click"}),u.useAltText?u.currentImageAlt=u.currentImage.attr("alt")||e(document).find("title").text()||"":u.currentImageAlt=e(document).find("title").text()||"",u.currentImageUrl=new t(u.currentImage.attr("src")).absoluteTo(window.location.toString()).toString();
var i=window.location.toString();i=u.checkAndAddUTMParams(i,"tapiture"),u.closeAuthWindow(),u.win=window.open(u.generateTapitureUrl(i),"image-sharer-tapiture","width=600,height=500")},generateTapitureUrl:function(t){var r={url:u.currentImageUrl,title:u.currentImageAlt,page_url:t,type:"image"};return"http://tapiture.com/widget/tap?"+e.param(r)},openYummly:function(r){r.preventDefault(),u.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"yummly-click"}),u.useAltText?u.currentImageAlt=u.currentImage.attr("alt")||e(document).find("title").text()||"":u.currentImageAlt=e(document).find("title").text()||"",u.currentImageUrl=new t(u.currentImage.attr("src")).absoluteTo(window.location.toString()).toString();var i=window.location.toString();i=u.checkAndAddUTMParams(i,"yummly"),u.closeAuthWindow(),u.win=window.open(u.generateYummlyUrl(i),"image-sharer-yummly","width=600,height=500")},generateYummlyUrl:function(t){var r={url:t,title:u.currentImageAlt,image:u.currentImageUrl};return"http://www.yummly.com/urb/verify?"+e.param(r)},goSmall:function(){u.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-large").addClass("sumome-image-sharer-popup-small"),this.resize()},goLarge:function(){u.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-small").addClass("sumome-image-sharer-popup-large"),this.resize()},resize:function(){var e=u.$modal.closest(".sumome-image-sharer-popup"),t="small",r=e.innerWidth();t=r>=1440?"xxlarge":r>=1080?"xlarge":r>=768?"large":r>=480?"medium":"small";var i="sumome-res-"+t;e.removeClass("sumome-res-small sumome-res-medium sumome-res-large sumome-res-xlarge sumome-res-xxlarge").addClass(i)},showError:function(t){e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Golly Gee Wilikers</h3><h5>'+t+'</h5><hr><button class="sumome-button sumome-alert sumome-radius sumome-expand">Close</button></div>')},close:function(){u.closeAuthWindow(),a.close()},openAuthWindow:function(){u.isAuthWindowClosed()&&(u.win=window.open("about:blank","image-sharer-auth","width=1,height=1"))},isAuthWindowClosed:function(){return!u.win||u.win.closed},closeAuthWindow:function(){u.isAuthWindowClosed()||(u.win.close(),u.win=null)},mouseenter:function(t){var r=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(e.isCurrentUrlAllowed(u.display_rules,null,u.ctry,u.views)){var i=e.timer("hideImageSharer");i&&i.kill(),u.currentImage=null;var n=e(t.target),a=n.naturalWidth(),o=n.naturalHeight(),r=n.width(),s=n.height();if(150>a||150>o)return void u.buttonEl.stop(!0,!0).fadeOut(500);if(n.parent().is("div[id^=grs_]"))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(n.is(".ob-widget *"))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(n.attr("rel")&&0==n.attr("rel").toLowerCase().indexOf("noshare"))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(n.attr("rel")&&0==n.attr("rel").toLowerCase().indexOf("share"));else{var l=n.parent(),c=/[^/\\]+(?:jpg|gif|png)/gi;if(u.ignoreLinks&&l&&"A"==l.get(0).tagName.toUpperCase()&&l.attr("href")&&l.attr("href")!=n.attr("src")&&null==l.attr("href").match(c))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(u.ignoreImgLinks&&l&&"A"==l.get(0).tagName.toUpperCase()&&l.attr("href")&&l.attr("href")!=n.attr("src")&&null!=l.attr("href").match(c))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(n.parents("form").length>0)return void u.buttonEl.stop(!0,!0).fadeOut(500);if(n.is(":hidden")||n.is(":invisible"))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(u.relShareOnly)return void u.buttonEl.stop(!0,!0).fadeOut(500)}u.currentImage=e(t.target),u.positionSharer(),u.isOverFixedHeader()||u.buttonEl.stop(!0,!0).fadeIn(500)}},visibleArea:function(t){for(var r={height:t.offsetHeight,width:t.offsetWidth,isRelative:!1},i={y:t.offsetTop||0,x:t.offsetLeft||0,node:t.offsetParent},n,a,o,s,l;!e(t).is("body")&&null!==(t=t.parentNode);){try{n=window.getComputedStyle(t)}catch(u){}if(n&&"relative"==n.position&&(r.isRelative=!0),n&&"hidden"===n.overflow)return a=t.offsetHeight-Math.max(e("body").offset().top,i.y),o=t.offsetWidth-Math.max(e("body").offset().left,i.x),t!==i.node&&(a+=t.offsetTop||0,o+=t.offsetLeft||0),a<r.height&&(0>a?r.height=0:r.height=a),o<r.width&&(0>o?r.width=0:r.width=o),r;t===i.node&&(i.y=i.y+(t.offsetTop||0),i.x=i.x+(t.offsetLeft||0),i.node=t.offsetParent)}return r},positionSharer:function(){if(null!=u.currentImage&&!e(".sumome-image-sharer-popup-content").is(":visible")){var t=u.currentImage.offset(),r=u.currentImage.offsetParent().offset(),i=u.visibleArea(u.currentImage[0]),n=i.hasHiddenOverflow,a=["absolute"].indexOf(u.currentImage.css("position"))>=0;if(a){if(i.isRelative)var o=["absolute","fixed","relative"];else var o=["absolute","fixed"];var s=u.currentImage.parents().filter(function(){return!e(this).is("body,html")&&o.indexOf(e(this).css("position"))>=0});a=s&&s.length}var l=null,c=null,h=null,d=null;if(a){var p=Math.max(e("body").offset().top+(isNaN(parseFloat(e("body").css("padding-top")))?0:parseFloat(e("body").css("padding-top"))),t.top-(t.top-r.top)),m=Math.max(e("body").offset().left+(isNaN(parseFloat(e("body").css("padding-left")))?0:parseFloat(e("body").css("padding-left"))),t.left-(t.left-r.left)),l=parseFloat(isNaN(parseFloat(u.currentImage.css("padding-top")))?0:parseFloat(u.currentImage.css("padding-top")))+parseFloat(isNaN(parseFloat(u.currentImage.css("border-top")))?0:u.currentImage.css("border-top")),c=parseFloat(isNaN(parseFloat(u.currentImage.css("padding-left")))?0:parseFloat(u.currentImage.css("padding-left")))+parseFloat(isNaN(parseFloat(u.currentImage.css("border-left")))?0:u.currentImage.css("border-left"));h=t.top-p+l<0?0:t.top-p+l,d=t.left-m+c<0?0:t.left-m+c}else if("fixed"==u.currentImage.css("position"))var p=u.currentImage.position().top,m=u.currentImage.position().left;else var p=Math.max(e("body").offset().top+(isNaN(parseFloat(e("body").css("padding-top")))?0:parseFloat(e("body").css("padding-top"))),t.top),m=Math.max(e("body").offset().left+(isNaN(parseFloat(e("body").css("padding-left")))?0:parseFloat(e("body").css("padding-left"))),t.left);if(null===l)var l=parseFloat(isNaN(u.currentImage.css("padding-top"))?0:u.currentImage.css("padding-top"))+isNaN(parseFloat(u.currentImage.css("border-top")))?0:parseFloat(u.currentImage.css("border-top")),c=parseFloat(isNaN(u.currentImage.css("padding-left"))?0:u.currentImage.css("padding-left"))+isNaN(parseFloat(u.currentImage.css("border-left")))?0:parseFloat(u.currentImage.css("border-left"));var f=parseFloat(isNaN(u.currentImage.css("padding-left"))?0:u.currentImage.css("padding-bottom"))+isNaN(parseFloat(u.currentImage.css("border-bottom")))?0:parseFloat(u.currentImage.css("border-bottom")),g=parseFloat(isNaN(u.currentImage.css("padding-left"))?0:u.currentImage.css("padding-right"))+isNaN(parseFloat(u.currentImage.css("border-right")))?0:parseFloat(u.currentImage.css("border-right")),v=i.height-(null!==h?p-t.top+h:l)-f,_=i.width-(null!==d?m-t.left+d:c)-g,b=null!==h?h:l,y=null!==d?d:c,w={},x="px"==u.vertical_offset_type?u.vertical_offset:v*(u.vertical_offset/100),C="px"==u.horizontal_offset_type?u.horizontal_offset:_*(u.horizontal_offset/100),I=u.vertical?40*u.services.length:40,k=u.vertical?40:40*u.services.length;"c"!==u.position&&(x+=10,C+=10),w="tl"==u.position?{top:p+x,left:m+C}:"tr"==u.position?{top:p+x,left:m+_-k-C}:"bl"==u.position?{top:p+v-I-x,left:m+C}:"br"==u.position?{top:p+v-I-x,left:m+_-k-C}:{top:p+v/2-I/2+x,left:m+_/2-k/2+C},w.top+=b,w.left+=y,w.position="fixed"==u.currentImage.css("position")?"fixed":"absolute",u.buttonEl.css(w)}},getImageData:function(t){var r=e(t).naturalWidth(),i=e(t).naturalHeight(),n=e(t).attr("src"),a=document.createElement("canvas"),o=1280,s=800;if(n&&n.toLowerCase().indexOf(".gif")>-1)return null;if(a){var l=Math.min(o/r,s/i);1>l&&(r*=l,i*=l),a.width=r,a.height=i;var u=a.getContext("2d");if(u){u.drawImage(t.get(0),0,0,r,i);try{return a.toDataURL()}catch(c){}}}return null},charactersLeft:function(e){var t,r,i,n=e,a="0123456789012345",s=o.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!0}),l=140;if(i=s.length,i>0)for(var r=0;i>r;r++)t=s[r].url,n=n.replace(t,a);return l-=n.length},touch:function(t){var r=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(e.isCurrentUrlAllowed(u.display_rules,null,u.ctry,u.views)){var i=e.timer("hideImageSharer");i&&i.kill();var n=t.pageX||t.originalEvent.touches[0].pageX,a=t.pageY||t.originalEvent.touches[0].pageY,o=e.nearest({x:n,y:a},"img");if(u.currentImage=null,!o)return void u.buttonEl.stop(!0,!0).fadeOut(500);var s=o.naturalWidth(),l=o.naturalHeight(),r=o.width(),c=o.height();if(150>s||150>l)return void u.buttonEl.stop(!0,!0).fadeOut(500);if(o.attr("rel")&&0==o.attr("rel").toLowerCase().indexOf("noshare"))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(o.attr("rel")&&0==o.attr("rel").toLowerCase().indexOf("share"));else{var h=o.parent(),d=/[^/\\]+(?:jpg|gif|png)/gi;if(u.ignoreLinks&&h&&"A"==h.get(0).tagName.toUpperCase()&&h.attr("href")&&h.attr("href")!=o.attr("src")&&null==h.attr("href").match(d))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(u.ignoreImgLinks&&h&&"A"==h.get(0).tagName.toUpperCase()&&h.attr("href")&&h.attr("href")!=o.attr("src")&&null!=h.attr("href").match(d))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(o.parents("form").length>0)return void u.buttonEl.stop(!0,!0).fadeOut(500);if(o.is(":hidden")||o.is(":invisible"))return void u.buttonEl.stop(!0,!0).fadeOut(500);if(u.relShareOnly)return void u.buttonEl.stop(!0,!0).fadeOut(500)}u.currentImage=o,u.positionSharer(),u.isOverFixedHeader()||(u.buttonEl.stop(!0,!0).fadeIn(500),e.timer("hideImageSharer",u.hideSharer,5e3).start())}},mouseleave:function(t){if(null!=u.currentImage){var r=e(t.toElement||t.relatedTarget);r.hasClass(".sumome-image-sharer")||r.closest(".sumome-image-sharer").length>0||u.hideSharer()}},hideSharer:function(){var t=e.timer("hideImageSharer");t&&t.kill(),u.currentImage=null,u.buttonEl.stop(!0,!0).fadeOut(500)},scroll:function(){u.isOverFixedHeader()&&u.hideSharer()},isOverFixedHeader:function(){var t="1"===u.buttonEl.css("opacity"),r="fixed"===e("header").css("position");if(t&&r){var i=8,n={x:parseInt(u.buttonEl.css("left").replace("px",""))-e(window).scrollLeft()-i,y:parseInt(u.buttonEl.css("top").replace("px",""))-e(window).scrollTop()-i,width:u.buttonEl.width()+2*i,height:u.buttonEl.height()+2*i},a={x:e("header").position().left,y:e("header").position().top,width:e("header").width(),height:e("header").height()};return l(n,a)?!0:!1}return!1},checkAndAddUTMParams:function(e,r){if("pro"in u&&u.pro&&e&&"utm"in u&&u.utm){var i=t(e);"utm_source"in u&&u.utm_source&&(i.removeQuery("utm_source"),i.addQuery("utm_source",u.utm_source.replace("{service}",r))),"utm_medium"in u&&u.utm_medium&&(i.removeQuery("utm_medium"),i.addQuery("utm_medium",u.utm_medium.replace("{service}",r))),"utm_name"in u&&u.utm_name&&(i.removeQuery("utm_campaign"),i.addQuery("utm_campaign",u.utm_name.replace("{service}",r))),"utm_custom_key"in u&&u.utm_custom_key&&"utm_custom_val"in u&&u.utm_custom_val&&(i.removeQuery(u.utm_custom_key),i.addQuery(u.utm_custom_key,u.utm_custom_val.replace("{service}",r))),e=i.toString()}return e}};return u}),sumo.define("55c989d5-855d-4538-b67b-3cdb46acd968/service",["jquery","55c989d5-855d-4538-b67b-3cdb46acd968/sharer"],function(e,t){return function(e){var r=function(r,i){sumo.require(["plugins/css!../css/sumome-image-sharer.css"]),t.api=e,t.init(),i()},i=function(e){e()};return{init:r,destroy:i}}}),sumo.define("55c989d5-855d-4538-b67b-3cdb46acd968/service",function(){})}(void 0,void 0);